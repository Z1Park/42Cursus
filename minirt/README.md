![screen_shot_2023-02-24_at_7 31 36_pm_720](https://github.com/Z1Park/42Seoul-Cursus/assets/82518170/465efd10-e29a-4f7b-9bea-d9fb117f6d7a)

![screen_shot_2023-03-08_at_3 17 43_pm_720](https://github.com/Z1Park/42Seoul-Cursus/assets/82518170/3dfb9bf3-4546-485a-9ca7-b2917df1c6db)

![screen_shot_2023-03-09_at_5 25 29_pm_720](https://github.com/Z1Park/42Seoul-Cursus/assets/82518170/330cd8fc-7d2e-40af-baa5-566e20c82a02)

![screen_shot_2023-03-09_at_5 27 53_pm_720](https://github.com/Z1Park/42Seoul-Cursus/assets/82518170/571e1a6f-f651-4e31-87c0-4c3b83e527bb)

![_______________________________2023-02-26______________2 19 37_720](https://github.com/Z1Park/42Seoul-Cursus/assets/82518170/e296bb8e-85ca-4ffb-9a4c-2d79c3bef0b5)

![_______________________________2023-02-26______________3 45 52_720](https://github.com/Z1Park/42Seoul-Cursus/assets/82518170/982ae0be-2089-4aa2-a03a-111785a8ad81)

![screen_shot_2023-03-09_at_5 27 24_pm_720](https://github.com/Z1Park/42Seoul-Cursus/assets/82518170/9ea44252-e6c5-4fb4-ac1c-666b891c7b16)

![image_720](https://github.com/Z1Park/42Seoul-Cursus/assets/82518170/f97e1b5d-93dd-4c56-b9e6-b0d9cfa852d3)

<img width="465" alt="Screen Shot 2023-05-25 at 5 32 50 PM" src="https://github.com/Z1Park/42Seoul-Cursus/assets/82518170/e61f2076-f989-47ba-a375-eb6b52993434">

---
- 개요

특정 카메라 시점에서 ray를 쏘았을 때, 물체에 맞는 지 여부와 맞았다면 그 거리를 계산하여 3차원 공간 상에 존재하는 도형을 출력하는 과제

---
- 과정

1. 파일을 읽어 추가해야하는 object와 광원 등 설정들에 대한 값을 파싱한다.
2. 카메라의 위치와 방향을 기준으로 특정 구간에 ray를 쏘아 물체에 맞으면 단색으로 채색을 하여 물체의 형태가 잘 표현되는지 확인한다.
3. 물체의 형태가 잘 표현된다면, 물체와 카메라의 거리 및 ray가 맞은 지점에서의 법선 벡터를 계산한다.
4. 램버트 코사인 법칙과 Phong model 기법에 대해 이해하고, 이를 코드로 구현하여 물체의 색을 기반으로 색을 정한다.
5. 물체가 맞은 지점에서 각 광원들을 순회하며, 그 사이에 다른 물체가 존재하여 그림자가 존재하는지 확인한다.
6. 구, 원기둥, 평면, 원뿔 등 구현하고자 하는 도형에 대해서 위의 과정을 반복한다.
7. 텍스쳐를 입히기 위해 각 물체별로 w, h(기준 점을 시작으로 가로와 세로가 얼만큼 떨어져 있는가)를 계산하고, ray가 맞은 지점이 어느 지점인지 확인 후 텍스쳐의 위치를 매칭하여 도형 위에 텍스쳐를 입힌다. 체커 패턴도 이를 응용하여 구현한다.
8. 범프맵에 대해 이해하고, 그레이스케일 된 텍스쳐 파일을 참조하여 ray가 맞은 지점의 법선 벡터를 흔들어 질감과 그림자를 표현한다.
9. 반사를 구현하기 위해 ray가 맞는다면 정반사 된 ray를 새로 쏘아 그를 따라가는 ray tracing을 구현한다.
10. 위와 동일하게 굴절을 구현하기 위해 ray가 맞는다면 물체의 질감에 따른 굴절률을 계산하여 굴절된 ray를 쏘고 그를 따라간다.
11. 그 외의 원하는 추가 기능을 구현한다.(안티 엘리어싱, 다른 3D 표현 모델 등)

---
- 어려웠던 점

1. 팀으로 진행하는 과제였는데, 해당 과제가 과거에 개인 혼자서 진행하는 과제였던 탓에 업무를 명확하게 분담하기가 어렵고 분담한다 해도 자신이 하지 않는 부분에 대한 이해도가 필요했다. 그 탓에 우리팀의 경우에는 각자 기본적인 도형과 화면에 출력하는 것까지는 구현해보고 코드를 합치고 그 이후 기능과 도형별로 분담하여 구현했다. 각자 참고한 레퍼런스가 다르고 이를 코드로 표현한 형태가 달라 코드를 합치는 과정이 가장 오래걸렸던 것 같다.
2. MLX 라이브러리 특성상 디버깅이 굉장히 어려웠다. 그림자를 적용한 이후에 특정 도형을 추가하면 화면에 검정색 노이즈가 끼는 현상이 있었는데, 이를 디버깅 하는 과정에서 ray를 casting하는 모든 픽셀마다 확인 할 수 없기 때문에 원인에 대해 대략적으로 추정하고 고쳐나가는 식으로 수정했었다. 이 과정에서 당연하게도 추정한 원인으로 코드를 고쳤을 때 바로 해결되는 경우가 거의 없었고 다시 원인이 뭘까 고민하고 개선하고 하면서 굉장히 많은 시간이 들었고 그로 인해 상당한 스트레스를 받았었다.

---
- 배운 점

1. ray를 쏘고, 물체에 맞고, 그 거리를 계산하고, 법선 벡터를 구하고 하는 일련의 과정들이 기본적으로 3차원에서의 좌표와 벡터에 대한 이해를 전제로 하기 때문에, 그 동안 잊고 지냈었던 수학 공식들과 이론들에 대해서 다시 공부할 수 있었던 기회였다.
2. Lambert's cosine law나 Phong model, dump-map 등 3D 표현에 적용되는 다양한 기법에 대해 알게 되었다.
3. 사실 현재 진행했던 과제 중 가장 눈에 잘 보여지고 노력을 곁들인다면 더 좋은 이미지를 만들어낼 수 있기 때문에, 42 서울에서 진행했었던 과제 중에 가장 재미있게 진행했던 것 같다.
