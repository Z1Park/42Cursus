- 개요

bash를 따라 구현하는 minishell 과제에 앞서, bash에서 나열되어있는 명령어들을 프로세스와 파이프를 통해 병렬적으로 처리하는 방식에 대해 이해하고 이를 구현해보는 과제

---
- 과정

1. 프로세스의 개념과 분기되어 있는 부모/자식 프로세스에서 파이프가 어떻게 데이터를 처리하는 지에 대해 이해한다.
2. c언어의 fork와 pipe를 통해 이를 구현한다.

---
- 어려웠던 점

1. 파이프의 개념을 처음 접해보았고, 파이프가 병렬적으로 처리된다는 사실은 이해하고 있었지만 이를 직접 구현하는 방법에 대해서 많은 시행착오를 겪었다. 파이프를 병렬적으로 처리하게 만들기 위해 자식에서 명령어의 수행 결과를 pipe의 쓰기 측으로 묶고, 부모에서 표준 입력을 pipe의 읽기 측으로 묶었다. 이렇게 묶게 되면 다음 명령어를 수행할 때 입력이 필요하다면 표준 입력과 묶여있는 이전 명령어의 파이프 입력 측에서 가져다가 쓰기 때문에 연쇄적 처리가 되고, 파이프를 표준 입력과 출력에 묶어놓고 다음 명령어로 넘어가 프로세스를 분기하는 식으로 넘어가기 때문에 앞의 명령어가 끝나지 않더라도 병렬적으로 파이프 전개가 이루어진다.
2. 과제에서 waitpid를 각 프로세스 분기마다 걸어줬었는데, 이는 프로세스가 병렬적으로 전개되지 않도록 한다. pipex 과제 이후 minishell 과제를 진행하며 해당 부분에 동작 오류가 있었다는 사실을 발견하게 되었다.

---
- 배운 점

1. 프로세스와 프로세스의 분기에 따른 메모리 복사, 파이프, 소켓 통신을 사용하는 파이프가 어떻게 프로세스 간 데이터를 주고받을 수 있는지 대해 이해할 수 있었다.
2. bash에서의 '<, <<, >, >>'와 같은 redirection의 동작 대해 이해하고 이를 직접 구현하여 활용해 볼 수 있었다.
